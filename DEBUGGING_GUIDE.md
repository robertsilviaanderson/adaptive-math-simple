# Руководство по отладке и настройке проекта

## Содержание
1. [Настройка виртуального окружения](#настройка-виртуального-окружения)
2. [Запуск приложения](#запуск-приложения)
3. [Отладка в VS Code](#отладка-в-vs-code)
4. [Импорт заданий](#импорт-заданий)
5. [Доступ к админке](#доступ-к-админке)

## Настройка виртуального окружения

1. Создайте виртуальное окружение:
   ```bash
   python -m venv venv
   ```

2. Активируйте его:
   - Для macOS/Linux:
     ```bash
     source venv/bin/activate
     ```
   - Для Windows:
     ```
     .\venv\Scripts\activate
     ```

3. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```

## Запуск приложения

1. Убедитесь, что виртуальное окружение активировано
2. Установите переменные окружения:
   ```bash
   export FLASK_APP=app.py
   export FLASK_ENV=development
   ```
3. Запустите приложение:
   ```bash
   flask run --port=8083
   ```
4. Откройте в браузере: http://localhost:8083

## Отладка в VS Code

### Быстрый старт
1. Откройте проект в VS Code
2. Перейдите во вкладку "Run and Debug" (Ctrl+Shift+D)
3. Выберите "Python: Flask" из выпадающего списка
4. Нажмите F5 или зелёную кнопку "Start Debugging"

### Точки останова (Breakpoints)
- Кликните слева от номера строки, чтобы поставить точку останова
- Приложение остановится на этой строке во время выполнения

### Основные горячие клавиши
- **F5**: Продолжить выполнение
- **F10**: Шаг с обходом (Step Over)
- **F11**: Шаг с заходом (Step Into)
- **Shift+F11**: Шаг с выходом (Step Out)
- **Shift+F5**: Остановить отладку
- **Ctrl+Shift+F5**: Перезапустить отладку

## Импорт заданий

1. Подготовьте JSON-файл с заданиями (пример: `sample_tasks_import.json`)
2. Войдите в админ-панель
3. Перейдите во вкладку "Задания"
4. Нажмите кнопку "Импорт заданий"
5. Выберите файл и нажмите "Импортировать"

Формат JSON-файла:
```json
{
  "tasks": [
    {
      "title": "Название задания",
      "description": "Описание задания",
      "answer_type": "text|number",
      "correct_answer": {"value": "ответ", "type": "text|number"},
      "difficulty_level": 2.5,
      "topic": "Тема",
      "max_score": 1.0,
      "explanation": "Пояснение к решению"
    }
  ]
}
```

## Доступ к админке

Учетные данные администратора по умолчанию:
- Логин: `CalmAndManage`
- Пароль: `KeepMathAlive`

## Устранение неполадок

### Приложение не запускается
1. Проверьте, что виртуальное окружение активировано
2. Убедитесь, что все зависимости установлены
3. Проверьте, не занят ли порт 8083:
   ```bash
   lsof -i :8083
   ```

### Проблемы с отладкой
1. Убедитесь, что расширение Python установлено в VS Code
2. Проверьте, что выбран правильный интерпретатор Python (Ctrl+Shift+P → "Python: Select Interpreter")
3. Перезапустите VS Code

## Дополнительные настройки

### Изменение порта
Измените порт в файле `.vscode/launch.json`:
```json
"args": [
    "run",
    "--port=5000",
    "--no-debugger",
    "--no-reload"
]
```

### Добавление переменных окружения
Добавьте их в секцию `env` в `.vscode/launch.json`:
```json
"env": {
    "FLASK_APP": "app.py",
    "FLASK_ENV": "development",
    "DATABASE_URL": "sqlite:///app.db"
}
```
