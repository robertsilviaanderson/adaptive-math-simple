<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- CSRF Token for all forms -->
    <meta name="csrf-token" content="{{ csrf_token() }}">
    <title>{% block title %}–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap-spacelab.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
      integrity="sha512-dIcpCwHw..."
      crossorigin="anonymous" referrerpolicy="no-referrer">
    {% block extra_css %}{% endblock %}
</head>
<body>
    {% from "shared/form_macros.html" import form_start, csrf_field, csrf_js %}
    
    <div class="container">
        <div class="form-title">üîß –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</div>
        
        <div class="alert alert-dismissible alert-info" role="alert">
            üéÜ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, <strong>{{ current_user.username }}</strong>!
        </div>
        
        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 20px 0;">
            <h3 style="color: #495057; margin-top: 0;">üìÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ—Ñ–∏–ª–µ:</h3>
            <p><strong>–†–æ–ª—å:</strong> {{ current_user.role.title() }}</p>
            <p><strong>–ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥:</strong> {{ current_user.last_login.strftime('%d.%m.%Y %H:%M') }}</p>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∏ -->
        <ul class="nav nav-tabs" role="tablist">
            <li class="nav-item" role="presentation">
              <a class="nav-link {{ 'active' if active_tab == 'demo-data' else '' }}" href="{{ url_for('admin.demo_data') }}" role="tab">üìÖ –î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ</a>
            </li>
            <li class="nav-item" role="presentation">
              <a class="nav-link {{ 'active' if active_tab == 'users' else '' }}" href="{{ url_for('admin.users') }}" role="tab">üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</a>
            </li>
            <li class="nav-item" role="presentation">
              <a class="nav-link {{ 'active' if active_tab == 'topics' else '' }}" href="{{ url_for('admin.topics') }}" role="tab">üìö –¢–µ–º—ã</a>
            </li>
            <li class="nav-item" role="presentation">
              <a class="nav-link {{ 'active' if active_tab == 'settings' else '' }}" href="{{ url_for('admin.settings') }}" role="tab">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</a>
            </li>
            <li class="nav-item" role="presentation">
              <a class="nav-link {{ 'active' if active_tab == 'analytics' else '' }}" href="{{ url_for('admin.analytics') }}" role="tab">üìà –ê–Ω–∞–ª–∏—Ç–∏–∫–∞</a>
            </li>
            <li class="nav-item" role="presentation">
              <a class="nav-link {{ 'active' if active_tab == 'tasks' else '' }}" href="{{ url_for('admin.tasks') }}" role="tab">üìö –ó–∞–¥–∞–Ω–∏—è</a>
            </li>
          </ul>

          <div class="tab-content admin-content">
                {% block admin_content %}{% endblock %}
          </div>        

        
        <div class="admin-footer">
            <a href="{{ url_for('main.dashboard') }}" class="btn btn-secondary ms-2">‚Üê –ù–∞–∑–∞–¥ –≤ –ø–∞–Ω–µ–ª—å</a>
            <a href="{{ url_for('auth.logout') }}" class="btn btn-info ms-2">–í—ã–π—Ç–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã</a>
        </div>
    </div>
    
    {{ csrf_js() }}
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.min.js" integrity="sha384-7qAoOXltbVP82dhxHAUje59V5r2YsVfBafyUDxEdApLPmcdhBPg1DKg1ERo0BZlK" crossorigin="anonymous"></script>
    {% block extra_js %}{% endblock %}
</body>
</html>
